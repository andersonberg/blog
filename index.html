<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <title> | Anderson Berg</title>

  <meta name="author" content="Anderson Berg">
  <meta name="description" content="Blog sobre desenvolvimento Python">
  <meta name="robots" content="index,follow">

  <meta property="og:site_name" content="Anderson Berg">
  <meta property="og:type" content="website">
    <meta property="og:image" content="./opengraph.jpg">



  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="icon" type="image/x-icon" href="./favicon.ico">

  <link rel="alternate" type="application/rss+xml" title="Anderson Berg &raquo; Feed" href="/">
  <link rel="canonical" href="./index.html">

    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css" integrity="sha384-nn4HPE8lTHyVtfCBi5yW9d20FjT8BJwUXyWZT9InLYax14RDjBj46LmSztkmNP9w" crossorigin="anonymous">
      <link rel="stylesheet" href="./theme/css/styles.min.css?0830b1e2">
</head>
<body>
  <div class="Page pure-g ">
<div class="PageHeader pure-u-1">
    <nav class="pure-menu pure-menu-open pure-menu-horizontal">

        <a
			href="./index.html"
            title="Home page"
            class="PageHeader-link pure-menu-heading pure-menu-link">Anderson<span class="u-highlighted">Berg</a>

			<ul class="PageHeader-menu pure-menu-list">
                    <li class="pure-menu-item">
                        <a href="./pages/contato.html" class="PageHeader-menu-link pure-menu-link">Contato</a>
                    </li>

			</ul>
    </nav>
</div>
    <div class="PageContent pure-u-1">


<article class="Article u-box" itemscope="" itemtype="http://schema.org/BlogPosting">
        <div itemprop="image" itemscope itemtype="http://schema.org/ImageObject">
              <meta itemprop="url" content="The og:image url">
        </div>
    <span itemprop="mainEntityOfPage">
        <header>
            <h1 class="Article-title" itemprop="headline name">
                    <a
                        class="Article-titleLink"
                        href="./como-monitorar-spiders-spidermon.html"
                        title="Leia mais">
                Como monitorar web-crawlers com Spidermon
                    </a>
            </h1>

        </header>

        <div class="Article-content" itemprop="articleBody">

                
    <p>Uma das etapas mais importantes do web-scraping (ou raspagem de dados) é garantir a qualidade das informações extraídas. Devido ao grande volume de dados que podem ser coletados por um spider, é muito complicado analisar tudo manualmente. Porém existem ferramentas para auxiliar nesse processo que vão diminuir muito o trabalho de quem faz esse tipo de análise. Uma dessas ferramentas que vou apresentar neste artigo é o Spidermon.</p>


                <p class="Article-footer">
                    Em <time datetime="2020-09-01T13:00:00-03:00" itemprop="datePublished">01 Sep, 2020</time>
                    /
                    <a
                        class="Article-readmore"
                        href="./como-monitorar-spiders-spidermon.html"
                        title="Leia o artigo completo">Leia mais &gt</a>
                </p>
        </div>
    </span>

</article>
<article class="Article u-box" itemscope="" itemtype="http://schema.org/BlogPosting">
        <div itemprop="image" itemscope itemtype="http://schema.org/ImageObject">
              <meta itemprop="url" content="/images/pomodoro.jpg">
        </div>
    <span itemprop="mainEntityOfPage">
        <header>
            <h1 class="Article-title" itemprop="headline name">
                    <a
                        class="Article-titleLink"
                        href="./aprendendo-a-aprender.html"
                        title="Leia mais">
                Aprendendo a Aprender
                    </a>
            </h1>

        </header>

        <div class="Article-content" itemprop="articleBody">
                    <a
                            href="./aprendendo-a-aprender.html"
                            title="Leia o artigo completo">
<img
        src="images/pomodoro.jpg"
        alt="None"
        class="representative-image"
        width="180"
        height="180" />                    </a>

                
    <p>Há uns dois anos atrás, eu fiz um curso no Coursera chamado <a href="https://www.coursera.org/learn/aprender/home/welcome">Aprendendo a Aprender</a> (em inglês "Learning how to learn"). É um curso de aproximadamente quatro semanas onde os professores apresentam algumas ferramentas mentais para melhorar o seu processo de estudo e memorização. </p>
<p>Neste mesmo curso, durante as aulas, eles te incentivam a compartilhar o assunto aprendido de alguma forma. Esse compartilhamento te ajuda ainda mais a consolidar os conceitos que foram ensinados. Por essa razão resolvi escrever esse artigo. Além disso, por causa do período que estamos passando com o isolamento social, ouvi de muita gente próxima que está fazendo cursos online ou colocando os estudos em dia, aprendendo coisas novas, mas muitas vezes não consegue se concentrar por muitas horas ou tem dificuldades em combater a procrastinação.</p>


                <p class="Article-footer">
                    Em <time datetime="2020-06-05T13:00:00-03:00" itemprop="datePublished">05 Jun, 2020</time>
                    /
                    <a
                        class="Article-readmore"
                        href="./aprendendo-a-aprender.html"
                        title="Leia o artigo completo">Leia mais &gt</a>
                </p>
        </div>
    </span>

</article>
<article class="Article u-box" itemscope="" itemtype="http://schema.org/BlogPosting">
        <div itemprop="image" itemscope itemtype="http://schema.org/ImageObject">
              <meta itemprop="url" content="The og:image url">
        </div>
    <span itemprop="mainEntityOfPage">
        <header>
            <h1 class="Article-title" itemprop="headline name">
                    <a
                        class="Article-titleLink"
                        href="./como-criar-um-blog-com-django.html"
                        title="Leia mais">
                Como Criar um Blog de Forma Simples e Rápida com Django
                    </a>
            </h1>

        </header>

        <div class="Article-content" itemprop="articleBody">
                    <a
                            href="./como-criar-um-blog-com-django.html"
                            title="Leia o artigo completo">
<img
        src="images/blog_on.jpg"
        alt="None"
        class="representative-image"
        width="180"
        height="180" />                    </a>

                
    <p>Você quer criar um blog pra espalhar suas ideias na rede?</p>
<p>Quer fazer isso em <strong>poucos passos</strong> usando <strong>Django</strong>?</p>
<p>Nas últimas semanas fizemos algumas mudanças no Pythonize e agora o blog está totalmente em <strong>Django</strong>! Já era uma coisa que eu planejava fazer, afinal um blog que fala sobre Python é bom que seja feito com Python.</p>
<p>Neste post vou contar um pouco como foi a experiência de criar um blog em Django usando o <strong>Mezzanine</strong>, um CMS muito poderoso que já vem com um admin pronto para blogs.</p>
<p><strong>Continue lendo este artigo</strong> para aprender, com detalhes, como instalar o Mezzanine, criar um projeto, configurar e aplicar um tema. No final, ainda vou dar uma dica bônus.</p>


                <p class="Article-footer">
                    Em <time datetime="2014-12-28T01:11:22-03:00" itemprop="datePublished">28 Dec, 2014</time>
                    /
                    <a
                        class="Article-readmore"
                        href="./como-criar-um-blog-com-django.html"
                        title="Leia o artigo completo">Leia mais &gt</a>
                </p>
        </div>
    </span>

</article>
<article class="Article u-box" itemscope="" itemtype="http://schema.org/BlogPosting">
        <div itemprop="image" itemscope itemtype="http://schema.org/ImageObject">
              <meta itemprop="url" content="The og:image url">
        </div>
    <span itemprop="mainEntityOfPage">
        <header>
            <h1 class="Article-title" itemprop="headline name">
                    <a
                        class="Article-titleLink"
                        href="./20-artigos-e-sites-essenciais-para-voce-aprender-python.html"
                        title="Leia mais">
                20 artigos e sites essenciais para você aprender Python
                    </a>
            </h1>

        </header>

        <div class="Article-content" itemprop="articleBody">
                    <a
                            href="./20-artigos-e-sites-essenciais-para-voce-aprender-python.html"
                            title="Leia o artigo completo">
<img
        src="images/programar-python.jpg"
        alt="None"
        class="representative-image"
        width="180"
        height="180" />                    </a>

                
    <p>Durante nossa caminhada profissional utilizamos diversos recursos para prosseguir, aprender e adquirir experiência.</p>
<p>Neste artigo eu quero compartilhar com você 20 dos principais sites e artigos para aprender Python.</p>
<p>Muitos deles eu li na íntegra, outros os principais tópicos, mas todos tiveram contribuição na construção do meu conhecimento em Python.</p>


                <p class="Article-footer">
                    Em <time datetime="2014-12-15T19:29:33-03:00" itemprop="datePublished">15 Dec, 2014</time>
                    /
                    <a
                        class="Article-readmore"
                        href="./20-artigos-e-sites-essenciais-para-voce-aprender-python.html"
                        title="Leia o artigo completo">Leia mais &gt</a>
                </p>
        </div>
    </span>

</article>
<article class="Article u-box" itemscope="" itemtype="http://schema.org/BlogPosting">
        <div itemprop="image" itemscope itemtype="http://schema.org/ImageObject">
              <meta itemprop="url" content="//images/blog/pybr_600.jpg">
        </div>
    <span itemprop="mainEntityOfPage">
        <header>
            <h1 class="Article-title" itemprop="headline name">
                    <a
                        class="Article-titleLink"
                        href="./porque-voce-deve-ir-a-uma-pythonbrasil.html"
                        title="Leia mais">
                Por que você deve ir a uma PythonBrasil
                    </a>
            </h1>

        </header>

        <div class="Article-content" itemprop="articleBody">
                    <a
                            href="./porque-voce-deve-ir-a-uma-pythonbrasil.html"
                            title="Leia o artigo completo">
<img
        src="images/badge-pybr10.png"
        alt="None"
        class="representative-image"
        width="180"
        height="180" />                    </a>

                
    <p>Você quer um lugar pra <strong>aprender</strong> coisas novas, ficar <strong>antenado</strong> com novas tecnologias, <strong>trocar ideias</strong> com um monte de gente legal e interessante? Então você precisa ir a uma <strong>PythonBrasil</strong>!</p>
<p>No primeiro final de semana de novembro (6 a 9) ocorreu a <a href="http://2014.pythonbrasil.org.br/"><strong>PythonBrasil [10]</strong></a> em Porto de Galinhas, Pernambuco. Há muitos anos que tenho pensado em ir a uma Python Brasil, mas sempre esbarrei no problema de comprar passagens, além de arcar com os custos de ficar hospedado em uma cidade longe de onde se mora.</p>
<p>Este ano foi diferente, eu poderia finalmente participar de um grande evento da comunidade Python. Depois de tantas palavras de incentivo de amigos e de ler <a href="http://henriquebastos.net/porque-voce-precisa-ir-na-pythonbrasil-2014/#more-1352">este artigo</a> do Henrique Bastos, eu não poderia deixar de ir.</p>


                <p class="Article-footer">
                    Em <time datetime="2014-11-29T12:42:30-03:00" itemprop="datePublished">29 Nov, 2014</time>
                    /
                    <a
                        class="Article-readmore"
                        href="./porque-voce-deve-ir-a-uma-pythonbrasil.html"
                        title="Leia o artigo completo">Leia mais &gt</a>
                </p>
        </div>
    </span>

</article>
<article class="Article u-box" itemscope="" itemtype="http://schema.org/BlogPosting">
        <div itemprop="image" itemscope itemtype="http://schema.org/ImageObject">
              <meta itemprop="url" content="The og:image url">
        </div>
    <span itemprop="mainEntityOfPage">
        <header>
            <h1 class="Article-title" itemprop="headline name">
                    <a
                        class="Article-titleLink"
                        href="./criar-api-rest-django.html"
                        title="Leia mais">
                Como criar uma API REST com Django
                    </a>
            </h1>

        </header>

        <div class="Article-content" itemprop="articleBody">
                    <a
                            href="./criar-api-rest-django.html"
                            title="Leia o artigo completo">
<img
        src="images/cloud-1.png"
        alt="None"
        class="representative-image"
        width="180"
        height="180" />                    </a>

                
    <p>Como construir uma  <strong>API Restful</strong>  totalmente  <strong>configurável</strong> ,  <strong>funcional</strong>  e  <strong>simples</strong> ?</p>
<p>Como tornar essa API <strong>pública</strong>, ao mesmo tempo que <strong>protege</strong> seus dados?</p>
<p>E como fazer tudo isso usando <strong>Django</strong>?</p>
<p>Você vai conhecerum pouco do <strong>Tastypie</strong>, um framework Python muito eficiente que provê uma <a href="http://pt.wikipedia.org/wiki/API">API</a> (Application Programming Interface, em português: Interface de Programação de Aplicativos) <a href="http://pt.wikipedia.org/wiki/REST">REST</a> totalmente configurável para trabalhar com Django.</p>
<p>Para acompanharo que vamos apresentar aqui, <strong>não</strong> é necessário ser expert emDjango. Vamos seguir um <strong>passo-a-passo</strong> bem simples. Se você já sabe como configurar e usar o Django, pode pular para a parte de configuração do Tastypie, ou utilizar este tutorial como lembrete.</p>
<p>Se você quer se aprofundar no estudo de Djangorecomendo os seguintes links: <a href="https://docs.djangoproject.com/en/1.6/intro/tutorial01/">Django Tutorial</a>, <a href="http://www.tangowithdjango.com/book/">Tango with Django</a>.</p>
<p>E para aprender mais sobre RESTful webservices, tem um tutorial bem interessante <a href="http://www.restapitutorial.com/">aqui</a>.</p>
<h2>Como Funciona o Tastypie</h2>
<p>O Tastypie ajuda você a publicar os models criados no Django, ao mesmo tempo que permite total controle sobre que é exibido ou não. O Tastypie <strong>serializa</strong> a saída em diversos formatos, incluindo json. Através da criação de objetos 'Resource', o Tastypie implementa formas de obter dados (GET), criar (POST) e modificar (PUT/PATCH) dados e excluir dados (DELETE).</p>
<p>Com estas dicas, você irá construir uma pequena API pra um exemplo de <strong>microblog</strong>, como o Twitter.</p>
<h2>Configurando o ambiente de desenvolvimento</h2>
<p>Antes de tudo e qualquer coisa, pra não bagunçar o seu ambiente, instale o <a href="https://virtualenv.pypa.io/en/latest/">virtualenv</a>. O virtualenv é uma ferramenta que cria um ambiente Python <strong>separado</strong> do seu sistema, evitando maiores dores de cabeça com configurações.</p>
<p>Para criar um ambiente virtual é bem simples, basta passar o comando virtualenv seguido do diretório onde vai ser armazenado o ambiente, por exemplo:</p>
<div class="highlight"><pre><span></span><code>$ virtualenv venv
</code></pre></div>


<p>Pronto, seu ambiente virtual foi instalado na pasta 'venv'. Agora, pra começar a usar é preciso ativar o ambiente:</p>
<div class="highlight"><pre><span></span><code>$ <span class="nb">source</span> venv/bin/activate
</code></pre></div>


<p>Você pode perceber que o contexto da sua linha de comando mudou, quer dizer que o ambiente está pronto pra ser usado.</p>
<h2>Instalação do Tastypie</h2>
<p>Com o ambiente ativado, agora é a hora de instalar o django, em seguida instale algumas dependências do tastypie e ele próprio:</p>
<div class="highlight"><pre><span></span><code>$ pip install django
$ pip install python-mimeparse lxml defusedxml
$ pip install django-tastypie
</code></pre></div>


<p>Pra maiores detalhes de instalação e configuração, você pode olhar na <a href="http://django-tastypie.readthedocs.org/en/latest/tutorial.html">documentação</a> do Tastypie.</p>
<h2>Criando um projeto Django</h2>
<p>Com tudo instalado, criar um projeto django e uma aplicação dentro do projeto também é bem fácil:</p>
<div class="highlight"><pre><span></span><code>$ django-admin.py startproject webserver
$ <span class="nb">cd</span> webserver/webserver
$ python ../manage.py startapp rest_app
</code></pre></div>


<h2>Configurando o banco de dados</h2>
<p>Vamos utilizar como banco de dados o Sqlite, verifique se no seu arquivo settings.py já está habilitado:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
<span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s1">&#39;django.db.backends.sqlite3&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s1">&#39;db.sqlite3&#39;</span><span class="p">),</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>

<p>Crie o banco de dados inicial para o Django:</p>
<div class="highlight"><pre><span></span><code>$ python manage.py syncdb
</code></pre></div>


<h3>Testando tudo até aqui</h3>
<p>Pra testar tudo até aqui, você pode iniciar o servidor:</p>
<div class="highlight"><pre><span></span><code>$ python manage.py runserver
</code></pre></div>


<p>E acessar através da url: http://localhost:8000</p>
<h3>pip freeze</h3>
<p>O pip tem um comando que cria um registro dos pacotes que foram instalados no ambiente. Isso é útil se você quiser recriar o projeto e ter todos os pacotes nas versões necessárias.</p>
<div class="highlight"><pre><span></span><code>$ pip freeze &gt; requirements.txt
</code></pre></div>


<h2>Criando a API</h2>
<h3>Criando uma nova aplicação</h3>
<p>Você cria um nova aplicação com o comando startapp:</p>
<div class="highlight"><pre><span></span><code><span class="err">$python manage.py startapp rest_app</span>
</code></pre></div>


<p>Lembre-se de atualizar o INSTALLED_APPS no seu arquivo settings.py com a aplicação criada.</p>
<h3>Configuração inicial do Tastypie</h3>
<p>O primeiro passo é adicionar 'tastypie' em INSTALLED_APPS no arquivo settings.py do seu projeto Django. A documentação do Tastypie diz que essa é a única configuração obrigatória. Para nosso exemplo vai ser suficiente por enquanto.</p>
<p>Eu tive que fazer uma modificação no settings.py por causa de um problema com autenticação. Não sei se será seu caso, só tive que remover uma linha do MIDDLEWARE_CLASSES:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">MIDDLEWARE_CLASSES</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s1">&#39;django.contrib.sessions.middleware.SessionMiddleware&#39;</span><span class="p">,</span>
    <span class="s1">&#39;django.middleware.common.CommonMiddleware&#39;</span><span class="p">,</span>
    <span class="s1">&#39;django.middleware.csrf.CsrfViewMiddleware&#39;</span><span class="p">,</span>
    <span class="s1">&#39;django.contrib.auth.middleware.AuthenticationMiddleware&#39;</span><span class="p">,</span>
    <span class="c1">#&#39;django.contrib.auth.middleware.SessionAuthenticationMiddleware&#39;,</span>
    <span class="s1">&#39;django.contrib.messages.middleware.MessageMiddleware&#39;</span><span class="p">,</span>
    <span class="s1">&#39;django.middleware.clickjacking.XFrameOptionsMiddleware&#39;</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>
</td></tr></table>

<h3>Criando seus models</h3>
<p>O <a href="https://docs.djangoproject.com/en/dev/topics/db/models/">model</a> é onde você armazena as informações básicas dos seus dados. Cada model é uma classe Python que herda de django.db.models.Model e que se torna uma tabela no seu banco de dados. Vamos criar alguns models para nossa aplicação.</p>
<p>Você só precisa criar um model para a nossa aplicação que é a classe que vai conter um post no microblog. A classe de usuário podemos obter do próprio Django.</p>
<p>Então, edite o seu arquivo models.py e adicione a seguinte classe:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Post</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">User</span><span class="p">)</span>
    <span class="n">date_created</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">now</span><span class="p">)</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="n">slug</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SlugField</span><span class="p">()</span>
</code></pre></div>
</td></tr></table>

<p>Este model tem um usuário associado, a data de publicação do post, o próprio texto e um campo chamado <strong><em>slug</em></strong>, que identifica um determinado post e vai ser útil pra poder fazer buscas.</p>
<p>Pra personalizar o slug, você precisa sobrescrever o método save() do model. Neste caso, vamos pegar somente os 50 primeiros caracteres do post como slug:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">slug</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slug</span> <span class="o">=</span> <span class="n">slugify</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)[:</span><span class="mi">50</span><span class="p">]</span>
    <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">Entry</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<p>A classe completa fica assim:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">tastypie.utils.timezone</span> <span class="kn">import</span> <span class="n">now</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django.utils.text</span> <span class="kn">import</span> <span class="n">slugify</span>


<span class="k">class</span> <span class="nc">Post</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">User</span><span class="p">)</span>
    <span class="n">date_created</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">now</span><span class="p">)</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="n">slug</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SlugField</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span>

    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">slug</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">slug</span> <span class="o">=</span> <span class="n">slugify</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)[:</span><span class="mi">50</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">Entry</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<h3>Criando Resources</h3>
<p>Tudo certo, mas como eu faço para expor meus dados através da API?</p>
<p>Você precisa criar <strong>resources</strong>.</p>
<p>No Tastypie, resources são os intermediários entre o usuário da sua API e os models de Django.</p>
<p>Crie o arquivo api.py no diretório da aplicação que você gerou anteriormente:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">tastypie.resources</span> <span class="kn">import</span> <span class="n">ModelResource</span>
<span class="kn">from</span> <span class="nn">rest_app.models</span> <span class="kn">import</span> <span class="n">Post</span>

<span class="k">class</span> <span class="nc">PostResource</span><span class="p">(</span><span class="n">ModelResource</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;post&#39;</span>
        <span class="n">queryset</span> <span class="o">=</span> <span class="n">Post</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</code></pre></div>
</td></tr></table>

<p>Você também tem que criar um resource para a classe de usuário:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">UserResource</span><span class="p">(</span><span class="n">ModelResource</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">queryset</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;user&#39;</span>
</code></pre></div>
</td></tr></table>

<p>E associar um usuário a um post. Logo, é precisoadicionar a seguinte linha na classe PostResource:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">user</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">UserResource</span><span class="p">,</span> <span class="s1">&#39;user&#39;</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<p>O arquivo api.py completo fica assim:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">tastypie.resources</span> <span class="kn">import</span> <span class="n">ModelResource</span>
<span class="kn">from</span> <span class="nn">webserver.rest_app.models</span> <span class="kn">import</span> <span class="n">Post</span>
<span class="kn">from</span> <span class="nn">tastypie.authorization</span> <span class="kn">import</span> <span class="n">Authorization</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span>
<span class="kn">from</span> <span class="nn">tastypie</span> <span class="kn">import</span> <span class="n">fields</span>

<span class="k">class</span> <span class="nc">UserResource</span><span class="p">(</span><span class="n">ModelResource</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">queryset</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;user&#39;</span>
        <span class="n">authorization</span> <span class="o">=</span> <span class="n">Authorization</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">PostResource</span><span class="p">(</span><span class="n">ModelResource</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">UserResource</span><span class="p">,</span> <span class="s1">&#39;user&#39;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;post&#39;</span>
        <span class="n">queryset</span> <span class="o">=</span> <span class="n">Post</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="n">authorization</span> <span class="o">=</span> <span class="n">Authorization</span><span class="p">()</span>
</code></pre></div>
</td></tr></table>

<p>A linha <strong><em>authorization = Authorization()</em></strong> serve para que você possa criar e modificar elementos na sua API utilizando o cURL, como vai ser mostrado mais a frente.</p>
<h3>Views e URLs</h3>
<p>Agora você precisa exibir os resources de alguma forma para que seus usuário tenham acesso à API. Para isso, é necessário criar urls para acessar os seus dados. Edite o arquivo urls.py do seu projeto para que fique assim:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">patterns</span><span class="p">,</span> <span class="n">include</span><span class="p">,</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">webserver.rest_app.api</span> <span class="kn">import</span> <span class="n">PostResource</span>

<span class="n">post_resource</span> <span class="o">=</span> <span class="n">PostResource</span><span class="p">()</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^api/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">post_resource</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
<span class="p">)</span>
</code></pre></div>
</td></tr></table>

<p>Você já pode iniciar o <strong><em>runserver</em></strong> e acessar sua API via URLs, por exemplo:</p>
<p><a href="http://127.0.0.1:8000/api/post/?format=json">http://127.0.0.1:8000/api/post/?format=json</a></p>
<p><a href="http://127.0.0.1:8000/api/post/1/?format=json">http://127.0.0.1:8000/api/post/1/?format=json</a></p>
<h3>Acessando a API</h3>
<p>Você pode interagir com a API usando o <a href="http://curl.haxx.se/">cURL</a>. É possível usar uma ferramenta de gerenciamento de banco SQLite, mas você perde a função de criar o slug automaticamente.</p>
<h4>Recuperando os Dados</h4>
<p>Para visualizar os dados, ou seja, obter os dados com o curl, o procedimento é semelhante a acessar um URL via browser:</p>
<div class="highlight"><pre><span></span><code>$ curl http://localhost:8000/api/post/1/?format<span class="o">=</span>json
</code></pre></div>


<h4>Enviando Dados</h4>
<p>Para enviar e criar novos dados, você precisa usar a função POST, como estamos utilizando json, você pode enviar nesse formato da seguinte forma:</p>
<div class="highlight"><pre><span></span><code><span class="err">curl --dump-header - -H &quot;Content-Type: application/json&quot; -X POST --data &#39;{&quot;text&quot;: &quot;Um post bem rápido&quot;, &quot;user&quot;: &quot;/api/user/1/&quot;}&#39; http://localhost:8000/api/post/</span>
</code></pre></div>


<h3>O estado atual do Tastypie</h3>
<p>Recentemente, o criador do Tastypie escreveu <a href="http://toastdriven.com/blog/2014/may/23/state-tastypie/">este artigo</a> comentando sobre o atual status do Tastypie, não só em termos de desenvolvimento como em popularidade.</p>
<p>O Tastypie ainda não possui uma versão 1.0, pois existem alguns pontos que precisam ser melhorados. Um deles é o desempenho quando muitos objetos precisam ser serializados.</p>
<p>Outra questão importante é a incompatibilidade com o Django 1.7 e ele ainda comenta que possui um novo projeto para framework RESTFul, o <a href="https://github.com/toastdriven/restless">Restless</a>.</p>
<p>Minha intenção com este artigo é apenas mostrar como é simples criar uma API com Python e Django usando o Tastypie, mas existem outras opções que podem ser exploradas e você pode deixar seu comentário se já teve experiência com alguma delas.</p

                <p class="Article-footer">
                    Em <time datetime="2014-10-05T19:37:02-03:00" itemprop="datePublished">05 Oct, 2014</time>
                    /
                    <a
                        class="Article-readmore"
                        href="./criar-api-rest-django.html"
                        title="Leia o artigo completo">Leia mais &gt</a>
                </p>
        </div>
    </span>

</article>
<article class="Article u-box" itemscope="" itemtype="http://schema.org/BlogPosting">
        <div itemprop="image" itemscope itemtype="http://schema.org/ImageObject">
              <meta itemprop="url" content="The og:image url">
        </div>
    <span itemprop="mainEntityOfPage">
        <header>
            <h1 class="Article-title" itemprop="headline name">
                    <a
                        class="Article-titleLink"
                        href="./criar-scripts-ssh-rapidamente-python.html"
                        title="Leia mais">
                Como Criar Scripts SSH Rapidamente com Python
                    </a>
            </h1>

        </header>

        <div class="Article-content" itemprop="articleBody">
                    <a
                            href="./criar-scripts-ssh-rapidamente-python.html"
                            title="Leia o artigo completo">
<img
        src="images/acesso-remoto-a-servidores.jpg"
        alt="None"
        class="representative-image"
        width="180"
        height="180" />                    </a>

                
    <p>Às vezes é necessário trabalhar com <strong>vários</strong> dispositivos ligados em <strong>rede</strong>, quer sejam computadores, roteadores ou outros tipos de equipamentos.</p>
<p>Em muitas ocasiões precisamos enviar <strong>comandos</strong> e <strong>instruções</strong> para estes equipamentos. Isso geralmente é feito através do envio de comandos ou dados via <strong>SSH</strong>.</p>
<p>Tudo bem entrar em um terminal e enviar um comando ou dois pra um equipamento ou outro.</p>
<p>Mas e se forem <strong>milhares</strong> de dispositivos interconectados?</p>
<p>Ou se são <strong>dezenas</strong> ou <strong>centenas</strong> de instruções em série?</p>
<p>E se estas duas situações ocorrem <strong>juntas</strong>?</p>
<p>Nesses casos é preciso criar scripts que façam tudo automatizado.</p>
<p>Neste artigo vou compartilhar minha experiência com o Paramiko, um módulo Python que fornece uma interface ao protocolo SSH2.</p>
<p>SSH é um protocolo de rede criptografado que realiza conexão segura entre computadores e permite executar comandos remotamente. Em diversas situações é necessário automatizar o processo de conexão e execução de comandos em um computador remoto.</p>
<h2>Como instalar o Paramiko</h2>
<p>Para instalar o Paramiko é necessário instalar antes o PyCrypto, que pode ser encontrado via easy_install ou no repositório da sua distribuição Linux. Encontrei algumas dificuldades para instalar o pycrypto no Windows, por sorte existem alguns binários compilados do pycrypto: <a href="http://www.voidspace.org.uk/python/modules.shtml#pycrypto">http://www.voidspace.org.uk/python/modules.shtml#pycrypto</a></p>
<p>Depois é só instalar o paramiko via easy_install ou procurando no repositório da distro Linux.</p>
<p>O paramiko tem uma classe base que fornece toda a interface para comunicação: <strong><em>paramiko.SSHClient</em></strong>. Para criar um objeto e criar uma conexão com um servidor é bem simples:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">paramiko</span>
<span class="n">ssh</span> <span class="o">=</span> <span class="n">paramiko</span><span class="o">.</span><span class="n">SSHClient</span><span class="p">()</span>
<span class="n">ssh</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="s1">&#39;anderson&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;123&#39;</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<p>Neste exemplo, a função 'connect' está conectando ao servidor SSH local, passando nome de usuário e senha através dos par&acirc;metros 'username' e 'password', respectivamente.</p>
<p>Quando você conecta em um servidor ssh pela primeira vez, uma chave é automaticamente armazenada em disco num arquivo chamado "<strong><em>.ssh/known_hosts</em></strong>" na sua pasta home. Para isto é preciso o usuário, manualmente, aceitar o armazenamento da chave do servidor, confirmando a confiabilidade deste. Para fazermos isso automaticamente através do Paramiko, utilizamos o objeto "set_missing_host_key_policy", passando "<strong><em>paramiko.AutoAddPolicy()</em></strong>" como parâmetro para aceitar automaticamente as chaves. Então, nosso código anterior pode ser modificado:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">paramiko</span>
<span class="n">ssh</span> <span class="o">=</span> <span class="n">paramiko</span><span class="o">.</span><span class="n">SSHClient</span><span class="p">()</span>
<span class="n">ssh</span><span class="o">.</span><span class="n">set_missing_host_key_policy</span><span class="p">(</span><span class="n">paramiko</span><span class="o">.</span><span class="n">AutoAddPolicy</span><span class="p">())</span>
<span class="n">ssh</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="s1">&#39;anderson&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;123&#39;</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<p>Tenha o cuidado de somente utilizar este artifício com servidores que você confia.</p>
<h2>Enviando comandos via ssh</h2>
<p>Já aprendemos como conectar em um computador remotamente via ssh. Agora vamos ver como enviar comandos e receber os resultados destes comandos. Isto é feito com o método "exec_command" do SSHClient(). Este método retorna uma tupla de objetos (stdin, stdout, stderr) que você pode ler (no caso do stdout e stderr) ou escrever (stdin). A sintaxe para executar um comando é a seguinte:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">stdin</span><span class="p">,</span> <span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span> <span class="o">=</span> <span class="n">ssh</span><span class="o">.</span><span class="n">exec_command</span><span class="p">(</span><span class="s1">&#39;ls</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<p>Que vai enviar o comando 'ls' para listar os arquivos do diretório atual. Para exibir o retorno deste comando podemos ler o conteúdo do objeto stdout e, em seguida, fechar a conexão ssh:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nb">print</span> <span class="n">stdout</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
<span class="n">ssh</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>
</td></tr></table>

<p>Em alguns casos precisamos enviar outras informações para execução do comando, como por exemplo uma senha de administrador. Podemos fazer isto escrevendo no objeto stdin.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">stdin</span><span class="p">,</span> <span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span> <span class="o">=</span> <span class="n">ssh</span><span class="o">.</span><span class="n">exec_command</span><span class="p">(</span><span class="s1">&#39;sudo fdisk -l</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">stdin</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;1234</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">stdin</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
<span class="nb">print</span> <span class="n">stdout</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
</code></pre></div>
</td></tr></table>

<p>O retorno dos comando pode ser tratado com as poderosas ferramentas de manipulação de string de Python, ou ainda filtradas com expressões regulares, dando ainda mais opções ao programador na hora de criar um script completo. Em outro post darei mais detalhes sobre a utilização do Paramiko.</p

                <p class="Article-footer">
                    Em <time datetime="2013-05-20T13:45:46-03:00" itemprop="datePublished">20 May, 2013</time>
                    /
                    <a
                        class="Article-readmore"
                        href="./criar-scripts-ssh-rapidamente-python.html"
                        title="Leia o artigo completo">Leia mais &gt</a>
                </p>
        </div>
    </span>

</article>
<article class="Article u-box" itemscope="" itemtype="http://schema.org/BlogPosting">
        <div itemprop="image" itemscope itemtype="http://schema.org/ImageObject">
              <meta itemprop="url" content="The og:image url">
        </div>
    <span itemprop="mainEntityOfPage">
        <header>
            <h1 class="Article-title" itemprop="headline name">
                    <a
                        class="Article-titleLink"
                        href="./recuperar-posts-twitter-rapidamente-python.html"
                        title="Leia mais">
                Como Recuperar Posts do Twitter Rapidamente com Python
                    </a>
            </h1>

        </header>

        <div class="Article-content" itemprop="articleBody">
                    <a
                            href="./recuperar-posts-twitter-rapidamente-python.html"
                            title="Leia o artigo completo">
<img
        src="images/twitter-buttons-medio.jpg"
        alt="None"
        class="representative-image"
        width="180"
        height="180" />                    </a>

                
    <p>Neste post vamos criar um <strong>crawler</strong> para recuperar <strong>tweets</strong> públicos. Tweets públicos são aqueles que não necessitam de autenticação, ou seja, não é necessário ter uma conta no Twitter para ler esses tweets.</p>
<p>Com Python, é bem simples recuperar qualquer status do Twitter, para isso, vamos utilizar o pacote <a href="http://code.google.com/p/python-twitter/">python-twitter</a>, que pode ser instalado via setuptools:</p>
<div class="highlight"><pre><span></span><code>$ easy_install python-twitter
</code></pre></div>


<p>Ou, pode ser baixado neste <a href="http://code.google.com/p/python-twitter/downloads/list">link</a>. Para instalar, extraia o conteúdo, vá até a pasta onde foi extraído e faça:</p>
<div class="highlight"><pre><span></span><code>$ python setup.py build
$ python setup.py install
</code></pre></div>


<p>O python-twitter provê acesso a API do Twitter via código Python.</p>
<p>Para ler a Api e buscar ajuda, faça:</p>
<div class="highlight"><pre><span></span><code>$ pydoc twitter.Status
$ pydoc twitter.User
$ pydoc twitter.DirectMessage
</code></pre></div>


<p>Para começar a utilizar o python-twitter, basta importar o pacote e criar uma instância da classe twitter.Api():</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">twitter</span>
<span class="n">api</span> <span class="o">=</span> <span class="n">twitter</span><span class="o">.</span><span class="n">Api</span><span class="p">()</span>
</code></pre></div>
</td></tr></table>

<p>Então, é possível obter os últimos tweets públicos facilmente com a função <em>GetPublicTimeline</em>, que retorna uma lista contendo em torno de 20 objetos do tipo <em>twitter.Status</em>, o texto do tweet em si está no atributo <em>text</em>:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">tweets</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">GetPublicTimeline</span><span class="p">()</span>
<span class="k">for</span> <span class="n">tweet</span> <span class="ow">in</span> <span class="n">tweets</span><span class="p">:</span>
    <span class="nb">print</span> <span class="n">tweet</span><span class="o">.</span><span class="n">text</span>
</code></pre></div>
</td></tr></table>

<p>Agora, para recuperar os 20 últimos tweets de um usuário específico, existe a função <em>GetUserTimeline</em>. Trocando '<em>user</em>' por um usuário real do twitter no código abaixo, você obtém uma lista semelhante a que foi retornada pela função <em>GetPublicTimeline:</em></p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">user_tweets</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">GetUserTimeline</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">tweet</span> <span class="ow">in</span> <span class="n">user_tweets</span><span class="p">:</span>
    <span class="nb">print</span> <span class="n">tweet</span><span class="o">.</span><span class="n">text</span>
</code></pre></div>
</td></tr></table>

<p>A função <em>GetUserTimeline</em> permite configurar a quantidade de tweets a serem recuperados através do parâmetro <em>count:</em></p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">user_tweets</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">tweets</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">GetUserTimeline</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="k">for</span> <span class="n">tweet</span> <span class="ow">in</span> <span class="n">tweets</span><span class="p">:</span>
    <span class="n">user_tweets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tweet</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span> <span class="n">user_tweets</span>
</code></pre></div>
</td></tr></table>

<p>Neste código utilizei a função <em>encode</em> para imprimir caracteres especiais em português.</p>
<p>Você pode encontrar mais detalhes das funções mostradas aqui na documentação da API, basta fazer no terminal:</p>
<div class="highlight"><pre><span></span><code>$ pydoc twitter.Api
</code></pre></div>


<p>O que você achou de usar a API do Twitter com Python?
Já tentou outras formas de acessar a API?
Deixe seu comentário logo abaixo!</p

                <p class="Article-footer">
                    Em <time datetime="2012-02-07T18:00:00-03:00" itemprop="datePublished">07 Feb, 2012</time>
                    /
                    <a
                        class="Article-readmore"
                        href="./recuperar-posts-twitter-rapidamente-python.html"
                        title="Leia o artigo completo">Leia mais &gt</a>
                </p>
        </div>
    </span>

</article>
<article class="Article u-box" itemscope="" itemtype="http://schema.org/BlogPosting">
        <div itemprop="image" itemscope itemtype="http://schema.org/ImageObject">
              <meta itemprop="url" content="//images/blog/vimpython.jpg">
        </div>
    <span itemprop="mainEntityOfPage">
        <header>
            <h1 class="Article-title" itemprop="headline name">
                    <a
                        class="Article-titleLink"
                        href="./dicas-simples-vim-ide-python.html"
                        title="Leia mais">
                6 dicas simples para o Vim ser uma IDE perfeita pra Python
                    </a>
            </h1>

        </header>

        <div class="Article-content" itemprop="articleBody">
                    <a
                            href="./dicas-simples-vim-ide-python.html"
                            title="Leia o artigo completo">
<img
        src="images/unixstickers.jpg"
        alt="None"
        class="representative-image"
        width="180"
        height="180" />                    </a>

                
    <p>Qual programador não procura um ambiente de desenvolvimento que seja <strong>simples</strong>, <strong>amigável</strong> e <strong>funcional</strong>?</p>
<p>Muitos acabam voltando ao bloco de notas por sua <strong>simplicidade</strong>.</p>
<p>Neste post você vai explorar o Vim, um editor de texto que roda na linha de comando e é a paixão de muitos desenvolvedores.</p>
<p>Em um <a href="http://www.pythonize.org/programando-em-python-no-vim/" title="Programando em Python no Vim">post anterior</a> eu falei sobre como habilitar o auto-complete no vim pra código em python. Neste post vamos um pouco mais além nessas configurações</p>
<p>Recentemente encontrei um <a href="http://dancingpenguinsoflight.com/2009/02/python-and-vim-make-your-own-ide/">post num blog</a> com dicas mostrando como tornar o vim numa IDE completa pra Python.</p>
<p>Testei algumas funcionalidades que tornaram o vim bem amigável pra programar e gerenciar código. Fiz todos os testes no Ubuntu, em outros sistemas Linux deve ser similar. Neste post vou passar essa experiência que tive configurando e usando o vim para criar código python.</p>
<p>Antes de tudo, instale os pacotes vim-full e vim-python se estiverem disponíveis nos repositórios do seu sistema. As configuração no vim são feitas num arquivo chamado vimrc, nas últimas versões do Ubuntu ele fica localizado na pasta /etc/vim e precisa ser root para modificá-lo.</p>
<h3>1. Destaque de código no Vim</h3>
<p>Para habilitar highlighting (destaque do código) no vim adicione a seguinte linha no arquivo vimrc:</p>
<div class="highlight"><pre><span></span><code><span class="err">syntax on</span>
</code></pre></div>


<p>No seu arquivo vimrc pode ser que esta linha venha comentada e acompanhada das seguintes linhas:</p>
<div class="highlight"><pre><span></span><code><span class="err">if has(&quot;syntax&quot;)</span>
<span class="err">    syntax on</span>
<span class="err">endif</span>
</code></pre></div>


<p>Basta descomentar estas linhas que o highlighting ficará disponível.</p>
<h3>2. Indentação de código</h3>
<p>Como a indentação em Python é fundamental, sem ela podem ocorrer erros no código, uma ide que  tenha auto-indentação é ideal.  No arquivo vimrc procure as seguintes linhas e descomente ou adicione se elas já não estiverem no arquivo:</p>
<div class="highlight"><pre><span></span><code><span class="err">&quot; Habilita auto-indentação</span>
<span class="err">if has(&quot;autocmd&quot;)</span>
<span class="err">  filetype plugin indent on</span>
<span class="err">endif</span>
</code></pre></div>


<h3>3. Número de linhas</h3>
<p>Para exibir o número das linhas no vim adicione o seguinte no vimrc:</p>
<div class="highlight"><pre><span></span><code><span class="s">&quot; Habilitar numero de linhas</span>
<span class="s">set number</span>

<span class="s">&quot;</span> <span class="n">Alternar</span> <span class="n">exibição</span> <span class="n">de</span> <span class="n">numero</span> <span class="n">de</span> <span class="n">linhas</span> (<span class="n">facilita</span> <span class="n">na</span> <span class="n">hora</span> <span class="n">de</span> <span class="n">copiar</span>)
<span class="n">nnoremap</span>  :<span class="n">set</span> <span class="n">nonumber</span>!: <span class="n">set</span> <span class="n">foldcolumn</span>=<span class="mi">0</span>
</code></pre></div>


<p>O resultado é este:</p>
<p><img class="align-center" src="/images/blog/vimpython.jpg" width="372" height="118" title="Vim com highlighting e numero de linhas" alt="Vim com highlighting e numero de linhas"></p>
<h3>4. Navegação pelo código</h3>
<p>Uma funcionalidade muito útil é a navegação pelo código. Com esta ferramenta habilitada é possível ver todas as classes e funções presentes no seu código e poder pular automaticamente pra qualquer uma delas.</p>
<p>Primeiro, é preciso instalar o pacote <a href="http://ctags.sourceforge.net/">exuberant-ctags</a>, disponível no repositório com este mesmo nome. Depois, baixe o <a href="http://www.vim.org/scripts/script.php?script_id=273">taglist</a>, que é um plugin do vim. Coloque o arquivo taglist.vim na pasta \~/.vim/plugin e o taglist.txt na pasta \~/.vim/doc, vá até esta última pasta, inicie o vim e rode :helptags. (com '.' no final) e já estará instalado.</p>
<p><img class="align-center" src="/images/blog/vim-explorer.jpg" width="858" height="100" title="Vim Explorer" alt="Vim Explorer"></p>
<p>Agora é preciso fazer algumas alterações no vimrc:</p>
<div class="highlight"><pre><span></span><code><span class="err">&quot; Exibe nome da função</span>
<span class="err">let g:ctags_statusline=1</span>
<span class="err">&quot; Inicializar script automaticamente</span>
<span class="err">let generate_tags=1</span>
<span class="err">&quot; Exibe os resultados em uma janela vertical</span>
<span class="err">let Tlist_Use_Horiz_Window=0</span>
<span class="err">&quot; Atalho para exibição da Taglist</span>
<span class="err">nnoremap TT :TlistToggle</span>
<span class="err">map  :TlistToggle</span>
<span class="err">&quot; Configurações para exibição da Taglist</span>
<span class="err">let Tlist_Use_Right_Window = 1</span>
<span class="err">let Tlist_Compact_Format = 1</span>
<span class="err">let Tlist_Exit_OnlyWindow = 1</span>
<span class="err">let Tlist_GainFocus_On_ToggleOpen = 1</span>
<span class="err">let Tlist_File_Fold_Auto_Close = 1</span>
</code></pre></div>


<p>A Taglist estará disponível através do atalho F4 ou digitando "TT" (dois 't' maiusculos) As últimas configurações servem para exibir uma janela vertical à direita mostrando a taglist e ganhar foco quando é chamada.</p>
<h3>5. Ocultar Código</h3>
<p>Quando o seu código começa a ter muitas funções e classes fica difícil ter uma visão geral do que está disponível no código. A maioria das IDE's possuem uma funcionalidade para ocultar parte do código e mostrar somente a assinatura ou definição de classes e funções.</p>
<p>No Vim isso é possível através de um <a href="http://www.vim.org/scripts/script.php?script_id=1494">plugin</a>. Para instalá-lo baixe o arquivo <a href="http://www.vim.org/scripts/script.php?script_id=1494">neste link</a>, crie uma pasta chamada ftplugin dentro da pasta \~/.vim e copie o plugin para a pasta ftplugin. A tecla 'F' (<Shift> + f) oculta ou exibe todo o código dentro de funções e classes, enquanto que a tecla 'f'' exibe ou oculta o código onde está o cursor.</p>
<p><img class="align-center" src="/images/blog/vim-code-folding.jpg" width="843" height="146" title="Vim Code Folding" alt="Vim Code Folding"></p>
<h3>6. Project Explorer</h3>
<p>Essa é uma das principais funções de uma IDE: organizar seu projeto. No Vim é preciso instalar o plugin <a href="http://www.vim.org/scripts/script.php?script_id=1658">NerdTree</a>, que pode ser baixado <a href="http://www.vim.org/scripts/script.php?script_id=1658">aqui</a>. Para instalar basta extrair o conteudo do arquivo .zip na pasta \~/.vim. Rode  :helptags. (com '.' no final) e rode :help NERD_tree.txt para ver o arquivo de ajuda. Pra utilizar o plugin digite :NERDTree e será aberta uma janela com o conteúdo da pasta atual.</p>
<p>Na <a href="http://www.vim.org/scripts/index.php">página de scripts</a> do vim, você pode encontrar outros plugins de Python para o vim. Se você testar algum outro plugin ou tiver uma funcionalidade interessante que eu não comentei no post, deixe sua experiência nos comentários.</p

                <p class="Article-footer">
                    Em <time datetime="2012-01-10T13:43:24-03:00" itemprop="datePublished">10 Jan, 2012</time>
                    /
                    <a
                        class="Article-readmore"
                        href="./dicas-simples-vim-ide-python.html"
                        title="Leia o artigo completo">Leia mais &gt</a>
                </p>
        </div>
    </span>

</article>
<article class="Article u-box" itemscope="" itemtype="http://schema.org/BlogPosting">
        <div itemprop="image" itemscope itemtype="http://schema.org/ImageObject">
              <meta itemprop="url" content="The og:image url">
        </div>
    <span itemprop="mainEntityOfPage">
        <header>
            <h1 class="Article-title" itemprop="headline name">
                    <a
                        class="Article-titleLink"
                        href="./criar-parsers-html-beautifulsoup.html"
                        title="Leia mais">
                Como criar parsers HTML poderosos com BeautifulSoup
                    </a>
            </h1>

        </header>

        <div class="Article-content" itemprop="articleBody">
                    <a
                            href="./criar-parsers-html-beautifulsoup.html"
                            title="Leia o artigo completo">
<img
        src="images/beautifulsoup.jpg"
        alt="None"
        class="representative-image"
        width="180"
        height="180" />                    </a>

                
    <p>Neste post você vai aprender como criar um parser pra recuperar
informações de páginas HTML utilizando o BeautifulSoup. O BeautifulSoup
pode ser usado para arquivos HTML ou XML, com ele fica muito simples
navegar e buscar textos em páginas HTML. Uma grande vantagem da
BeautifulSoup é que ela consegue criar uma estrutura mesmo com páginas
html mal formatadas, facilitando o trabalho do programador.</p>
<h2>Instalando o BeautifulSoup</h2>
<p>Você pode fazer a instalação via <em>pip</em> ou <em>easy_install</em>. Também estão
disponíveis pacotes em diferentes distribuições Linux.</p>
<p>Inicie o interpretador Python para testar os códigos que vamos
apresentar a seguir.</p>
<p>Para processar páginas HTML, importe o BeautifulSoup da seguinte forma:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">BeautifulSoup</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
</code></pre></div>


<p>Se você for processar arquivos XML:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">BeautifulSoup</span> <span class="kn">import</span> <span class="n">BeautifulStoneSoup</span>
</code></pre></div>


<p>Você pode também consultar a documentação do BeautifulSoup
<a href="http://www.crummy.com/software/BeautifulSoup/bs4/doc/" title="BeautifulSoup">aqui</a>.</p>
<h2>Criando o parser</h2>
<p>Por enquanto vamos processar apenas páginas html. Vamos usar a biblioteca urllib2 para recuperar uma página html.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">urllib2</span>
<span class="n">pagina</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="s2">&quot;http://www.globo.com&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</code></pre></div>


<p>Isso vai criar uma string com todo o código html da página. Então, para criar o parser basta:</p>
<div class="highlight"><pre><span></span><code><span class="err">soup = BeautifulSoup(pagina)</span>
</code></pre></div>


<p>É possível transformar esse objeto BeautifulSoup em string com o método
prettify, que manipula o código bruto adicionando quebra de linha e
espaçamento recriando a estrutura do código html.</p>
<div class="highlight"><pre><span></span><code><span class="err">soup.prettify()</span>
</code></pre></div>


<p>Para listar todos os links da página recuperada, usamos o método
findAll:</p>
<div class="highlight"><pre><span></span><code><span class="err">links = soup.findAll(&#39;a&#39;)</span>
</code></pre></div>


<p>Neste código, '<em>links</em>' é uma lista contendo objetos do tipo Tag da
biblioteca BeautifulSoup (class BeautifulSoup.Tag). Vamos agora, listar
somente os links (tirando qualquer texto ou marcação) que estão nesses
objetos Tag:</p>
<div class="highlight"><pre><span></span><code><span class="err">for link in links:</span>
<span class="err">    print link[&#39;href&#39;]</span>
</code></pre></div>


<p>Para recuperar somente uma área da página, é possível usar o método find
com o parâmetro id, por exemplo:</p>
<div class="highlight"><pre><span></span><code><span class="err">colunas = soup.find(id=&quot;glb-area-colunas&quot;)</span>
<span class="err">linkscol = colunas.findAll(&#39;a&#39;)</span>
<span class="err">for link in linkscol:</span>
<span class="err">    print link[&#39;href&#39;]</span>
</code></pre></div>


<p>A biblioteca BeautifulSoup facilita muito na hora de criar parsers e
crawlers para páginas html ou xml. Usada junto com o urllib2 são
poderosos aliados na recuperação de informação na web.</p

                <p class="Article-footer">
                    Em <time datetime="2011-12-31T15:45:19-03:00" itemprop="datePublished">31 Dec, 2011</time>
                    /
                    <a
                        class="Article-readmore"
                        href="./criar-parsers-html-beautifulsoup.html"
                        title="Leia o artigo completo">Leia mais &gt</a>
                </p>
        </div>
    </span>

</article>

<ul class="Pagination u-box">

        <li class="Pagination-item Pagination-item--active">
            <a
                class="Pagination-link Pagination-link--active"
                href="./index.html"
                title="Página 1">1</a>
        </li>
        <li class="Pagination-item">
            <a
                class="Pagination-link"
                href="./index2.html"
                title="Página 2">2</a>
        </li>

        <li class="Pagination-item Pagination-item--arrow">
            <a
                class="Pagination-link"
                href="./index2.html"
                title="Próxima página">

                <span class="Pagination-text">Próxima página</span>
                <span class="Pagination-icon">&#187;</span>
            </a>
        </li>
</ul>
    </div>

<footer class="PageFooter pure-u-1">
    <div class="u-box">
        <p>O conteúdo deste blog está sob a licença
          <a
              class="PageFooter-link"
              href=""
              title=""
              rel="nofollow"></a>.</p>

        <p>O código está disponível em
          <a
              class="PageFooter-link"
              href=""
              title="Contribute!"
              rel="nofollow"></a>.</p>
    </div>
</footer>  </div>

    <script>
        (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
        function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
        e=o.createElement(i);r=o.getElementsByTagName(i)[0];
        e.src='//www.google-analytics.com/analytics.js';
        r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
        ga('create','UA-25538784-1');ga('send','pageview');
    </script>
</body>
</html>