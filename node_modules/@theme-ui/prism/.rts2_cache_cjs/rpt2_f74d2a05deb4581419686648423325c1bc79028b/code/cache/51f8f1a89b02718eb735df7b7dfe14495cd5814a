{"code":"import Highlight, { defaultProps } from 'prism-react-renderer';\r\nimport { jsx, Styled } from 'theme-ui';\r\nconst aliases = {\r\n    js: 'javascript',\r\n    sh: 'bash',\r\n};\r\nconst isInRange = (start, end, num) => {\r\n    if (num >= start && num <= end) {\r\n        return true;\r\n    }\r\n    return false;\r\n};\r\nconst checkRanges = (range, num) => {\r\n    for (let i = 0; i < range.length; i += 2) {\r\n        if (isInRange(range[i], range[i + 1], num)) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n};\r\nexport default function ThemeUIPrism({ children, className: outerClassName, ...props }) {\r\n    const [language] = outerClassName.replace(/language-/, '').split(' ');\r\n    const lang = aliases[language] || language;\r\n    let startEndRangesToHighlight = [];\r\n    const findStartAndEndHighlights = (tokens) => {\r\n        const tokensWithoutHighlightComments = tokens.filter((item, index) => {\r\n            const removeLine = item\r\n                .map(({ content }) => {\r\n                if (content === '// highlight-start') {\r\n                    startEndRangesToHighlight.push(index); // track our highlighted lines\r\n                    return true;\r\n                }\r\n                if (content === '// highlight-end') {\r\n                    startEndRangesToHighlight.push(index - 2); // since we're removing start and end lines, we'll shorten the range by 2 lines\r\n                    return true;\r\n                }\r\n            })\r\n                .filter(Boolean)[0];\r\n            if (!removeLine) {\r\n                return item;\r\n            }\r\n        });\r\n        return tokensWithoutHighlightComments;\r\n    };\r\n    const isStartEndHighlighted = (index) => {\r\n        return checkRanges(startEndRangesToHighlight, index);\r\n    };\r\n    const isInlineHighlighted = (line) => {\r\n        const regex = new RegExp('// highlight-line$');\r\n        for (let token of line) {\r\n            if (regex.test(token.content)) {\r\n                token.content = token.content.replace(regex, ''); // remove the highlight-line comment now that we've acted on it\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    const shouldHighlightLine = (line, index) => {\r\n        return isStartEndHighlighted(index) || isInlineHighlighted(line);\r\n    };\r\n    return (jsx(Highlight, Object.assign({}, defaultProps, props, { code: children.trim(), language: lang, theme: undefined }), ({ className, style, tokens, getLineProps, getTokenProps }) => {\r\n        const tokensWithoutHighlightComments = findStartAndEndHighlights(tokens);\r\n        return (jsx(Styled.pre, { className: `${outerClassName} ${className}`, style: style }, tokensWithoutHighlightComments.map((line, i) => {\r\n            const lineProps = getLineProps({ line, key: i });\r\n            if (shouldHighlightLine(line, i)) {\r\n                lineProps.className = `${lineProps.className} highlight`;\r\n            }\r\n            return (jsx(\"div\", Object.assign({}, lineProps), line.map((token, key) => (jsx(\"span\", Object.assign({}, getTokenProps({ token, key }), { sx: token.empty ? { display: 'inline-block' } : undefined }))))));\r\n        })));\r\n    }));\r\n}\r\n//# sourceMappingURL=index.js.map","map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../../src/index.tsx\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/jackson/theme-ui/packages/prism/index.d.ts","writeByteOrderMark":false,"text":"/** @jsx jsx */\r\nimport { ComponentProps } from 'react';\r\nimport Highlight from 'prism-react-renderer';\r\ndeclare type HighlightProps = ComponentProps<typeof Highlight>;\r\nexport interface ThemeUIPrismProps extends Omit<HighlightProps, 'children' | 'code' | 'language' | 'theme' | 'Prism'> {\r\n    className: string;\r\n    children: string;\r\n    Prism?: HighlightProps['Prism'];\r\n}\r\nexport default function ThemeUIPrism({ children, className: outerClassName, ...props }: ThemeUIPrismProps): JSX.Element;\r\nexport {};\r\n"}}
